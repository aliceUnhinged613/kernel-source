# KABI rules for symbols and modules
#
# A matching line with PASS allows kabi changes for given modules or symbols,
# FAIL causes an error. The first matching line is considered, the default is
# FAIL if no match is found.
#
# A pattern that contains slashes is matched against the module name a given
# symbol is exported from. The special pattern "vmlinux" matches built-in
# symbols. All other patterns match against symbol names.

drivers/staging/*		PASS

klp_*_patch			PASS
klp_shadow_*			PASS

kvm_x86_ops			FAIL
arch/x86/kvm/*			PASS

arch/powerpc/kvm/*		PASS
kvmppc_*			PASS
__xive_vm_h_*			PASS
realmode_pfn_to_page		PASS
iommu_tce_xchg_rm		PASS
mm_iommu_lookup_rm		PASS
mm_iommu_ua_to_hpa_rm		PASS
mm_iommu_ua_to_hpa_shift_rm	PASS
# functions shared between xive and kvm
xive_cleanup_irq_data		PASS
xive_native_populate_irq_data	PASS
# finctions internal to ppc radix mm
radix__*			PASS
# bsc#1157480 ltc#181028  power-specific devicetree hotplug handling
# With support for new devicetree format the old function does not make sense
rpaphp_get_drc_props		PASS

# IBM Z internal symbols
# Cf. bsc#894391 / LTC#115441 and bsc#1134730 / LTC#173388
arch/s390/*			PASS
drivers/s390/*			PASS
net/iucv/*			PASS
airq_iv_*			PASS
ccw_device_*			PASS
ccw_driver_*			PASS
get_ccwdev_*			PASS
zpci_*				PASS
register_adapter_interrupt	PASS
unregister_adapter_interrupt	PASS
enable_cmf			PASS
disable_cmf			PASS
cmf_read			PASS
cmf_readall			PASS
sclp				PASS

# struct posix_clock change (CVE-2020-10690 bsc#1170056)
posix_clock_register		PASS

# nobody cares bcache symbols
drivers/md/bcache/*		PASS

# inter-module symbols for qed/qede/qedf/qedi/qedr
drivers/net/ethernet/qlogic/qed/*	PASS
drivers/net/ethernet/qlogic/qede/*	PASS
drivers/scsi/qedf/*			PASS
drivers/scsi/qedi/*			PASS
drivers/infiniband/hw/qedr/*		PASS

# qla2xxx only has local symbols
drivers/scsi/qla2xxx/*		PASS

# inter-module symbols for hns3
drivers/net/ethernet/hisilicon/hns3/*	PASS
drivers/net/ethernet/hisilicon/hns3/hns3pf/*	PASS
drivers/net/ethernet/hisilicon/hns3/hns3vf/*	PASS
drivers/infiniband/hw/hns/*	PASS

# ceph-related modules
net/ceph/libceph		PASS
drivers/block/rbd		PASS
fs/ceph				PASS

# no out-of-tree users
drivers/crypto/ccp/*		PASS

# intermodule syms shared between cxgb4 and cxgb4vf
drivers/net/ethernet/chelsio/cxgb4/*   PASS
drivers/net/ethernet/chelsio/cxgb4vf/* PASS
